<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Javasript exercise</title>
</head>
<body>
<p>original:</p>
<p id="origin">...</p>
<p>result:</p>
<p id="result">...</p>

<button onclick="myFunction()">Try it</button>

<script type="text/javascript">
    arr = ['a','bc', 'ax','bb'];
    
    arr1 = [2, 5, 8];
    arr2 = [-1, 1, 2, 3, 4];
    r = document.getElementById('result');

    function merge(arr1, arr2) {
        var r = new Array();
        var len1 = arr1.length;
        var len2 = arr2.length;
        var i = 0, j = 0, k = 0;
        while (i < len1 && j < len2)  {
            if (arr1[i] < arr2[j]) {
                r[k] = arr1[i];
                i++;
            } else {
                r[k] = arr2[j];
                j++;
            }
            k++;
        }

        if (i == len1 && j == len2)
            return r;
        else if (i == len1) 
            return r.concat(arr2.slice(j, len2));
        else
            return r.concat(arr1.slice(i, len1));
    }

    //end is not inclusive: len = end - start
    function mergeSort(a, start, end) {
        console.log(a);
        if (a.length < 2)
            return a;

        var mid = Math.floor((end - start) / 2);
        console.log('start %d, mid %d, end %d', start, mid, end);
        console.log('left...');
        var left = mergeSort(a.slice(0, mid), start, mid);
        console.log('right...');
        var right = mergeSort(a.slice(mid, end), mid, end);
        console.log('left', left);
        console.log('right', right);
        var r = merge(left, right);
        console.log('returning...' + r);
        return r;
    }

    function myFunction() {
        //document.getElementById('origin').innerHTML = arr1+'</br>'+arr2;
        document.getElementById('origin').innerHTML = arr;
//        r.innerHTML = merge(arr1, arr2);
        r.innerHTML = mergeSort(arr, 0, arr.length); 
    }
</script>

</body>
</html>

